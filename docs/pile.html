<!DOCTYPE html>
<html>
<head>
<title>Piles</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
<script src="utils.js"></script>
</head>
<body>
<section class="section">
<h1 class="title">Les piles !</h1>
    <div class="columns">
    <div class="column is-vcentered">
    <article class="message is-info">
  <div class="message-header"><p>Instructions</p></div>
  <div class="message-body">
        <div class="content">
        Vous disposez d'une <strong>pile</strong>, pour l'instant vide, qui sera 
        composée d'éléments posés les uns sur les autres. Vous pouvez la modifier de deux manières :
        </div>
        <div class="content">
        <ul>
        <!-- <li><strong>Vider</strong> la pile consiste à enlever tous les éléments de la pile, s'il y en a. On obtient une pile vide.</li> -->
        <li><strong>Empiler</strong> un élément au sommet de la pile, c'est-à-dire tout en haut. Pour empiler un élément, cliquez sur lui :
            <div class="block" id="boutons"></div>
        </li>
        <li><strong>Dépiler</strong>, c'est-à-dire enlever l'élément qui se trouve au sommet.
            <div class="buttons is-flex is-justify-content-center">
         <!-- 
         <button class="button is-static">Empiler</button>
         <button class="button" onclick="p.vider()"><span class="icon">🗑</span><span>Vider</span></button> 
         -->
             <button class="button" onclick="verifier(this)" value="depiler"><span class="icon">⎋</span><span>Dépiler</span></button>
             </div>
        </li>
        </ul>
        </div>
        </div>
        </article>        
    </div>
    <div class="column is-one-quarter">
        <article class="message is-success" id="entete-message">
            <div class="message-header"><p id="message">Sauriez-vous reconstituter la pile ci-dessous ?</p>
            </div>
            <div class="message-body is-vcentered">
            <table class="table">
                <thead>
                <th>Votre pile</th>
                <th>Objectif</th>
                </thead>
                <tbody>
                <tr>
                <td id="pile_essai" style="vertical-align: bottom;"></td>
                <td id="objectif" style="vertical-align: bottom;"></td>
                </tr>
                </tbody>
            </table>
            </div>
        </article>
    </div>
</section>
<script>
liste_animaux = ["🦑","🪲","🐼","🦊","🦐","🦆","🐯","🐸"];
creer_liste_boutons(liste_animaux);

var p = new Pile("ta_pile");
p.mettre_dans("pile_essai");

var q = new Pile();
q.empiler(liste_animaux[entier_aleatoire(0,7)]);
q.empiler(liste_animaux[entier_aleatoire(0,7)]);
q.empiler(liste_animaux[entier_aleatoire(0,7)]);
q.empiler(liste_animaux[entier_aleatoire(0,7)]);
q.empiler(liste_animaux[entier_aleatoire(0,7)]);
q.mettre_dans("objectif");

function verifier(elt){
    if(elt.value=="depiler"){
        p.depiler();
    }else{
        p.empiler(elt.innerHTML);
    }
    
    if (q.est_egal_a(p)){
        document.getElementById("message").innerHTML = "BRAVO ! Rechargez la page pour avoir une nouvelle pile.";
        document.getElementById("entete-message").classList.remove("is-success");
        document.getElementById("entete-message").classList.add("is-danger");
    }else{
        document.getElementById("message").innerHTML = "Sauriez-vous reconstituter la pile ci-dessous ?";
        document.getElementById("entete-message").classList.add("is-success");
        document.getElementById("entete-message").classList.remove("is-danger");
    }
}
</script>
</body>
</html>
